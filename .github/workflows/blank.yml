name: Deploy Zip to Logic App

on:
  push:
    branches: [ "main" ] # Triggers when you push the zip to main

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v4

      - name: 'Login to Azure'
        uses: azure/login@v2
        with:
          creds: ${{ secrets.AZURE_CREDENTIALS }}

      
      - name: Simple Echo Test
        uses: ashwin-ant/action-test-publish@beta
        with:
          message: ./
          

      - name: 'Deploy Logic App Standard'
        uses: azure/functions-action@v1
        with:
          app-name: 'FileMover2'
          package: '$GITHUB_WORKSPACE/.github/release.zip' # Relative path to zip in your repo
          # If using Publish Profile instead of Azure Login:
          # publish-profile: ${{ secrets.AZURE_LOGICAPP_PUBLISH_PROFILE }}
